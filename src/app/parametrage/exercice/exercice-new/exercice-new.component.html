<p-toast></p-toast>
<!-- form exercice info -->
<form *ngIf="'Exercice'|creable" class="form" role="form" #exerciceForm="ngForm" autocomplete="off">
    <p-fieldset legend="Creation Exercice" [toggleable]="true">
        <!-- debut body -->
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-form-label form-control-label" for="code">Code</label>
                    <input required [(ngModel)]="exercice.code" class="form-control" type="text" name="code" id="code">
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-form-label form-control-label" for="libelle">Libelle</label>
                    <input required [(ngModel)]="exercice.libelle" class="form-control" type="text" name="libelle" id="libelle">
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-form-label form-control-label" for="dateDebut">Date Debut</label>
                    <!--input [(ngModel)]="exercice.dateDebut" class="form-control" type="text" name="dateDebut" id="dateDebut"-->
                    <p-inputMask required styleClass="form-control" mask="99-99-9999" [(ngModel)]="exercice.dateDebut" placeholder="dd/mm/yyyy" slotChar="dd/mm/yyyy" name="dateDebut" id="dateDebut"></p-inputMask>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-form-label form-control-label" for="dateFin">Date Fin</label>
                    <!--input [(ngModel)]="exercice.dateFin" class="form-control" type="text" name="dateFin" id="dateFin"-->
                    <p-inputMask required styleClass="form-control" mask="99-99-9999" [(ngModel)]="exercice.dateFin" placeholder="dd/mm/yyyy" slotChar="dd/mm/yyyy" name="dateFin" id="dateFin"></p-inputMask>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="form-group">
                    <label class="col-form-label form-control-label" for="exerciceSuivant">Exercice précédant</label> <br>
                    <p-dropdown [options]="exercices" name="exercices" [(ngModel)]="exercice.exerciceSuivant" placeholder="Selectionner exercice précédant" optionLabel="libelle" [showClear]="true"></p-dropdown>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    <label class="col-form-label form-control-label" for="encours">En cours</label> <br>
                    <p-inputSwitch name="encours" [(ngModel)]="exercice.encours"></p-inputSwitch>
                </div>
            </div>
        </div>
        <!-- fin body -->
        <p-toolbar>
            <button type="button" (click)="location.back()" class="btn btn-outline-secondary mr-1 pull-left"><i
          class="fa fa-reply" aria-hidden="true"></i>
        Retour</button>
            <button type="reset" class="btn btn-secondary pull-left"><i class="fa fa-eraser" aria-hidden="true"></i>
        Vider le formulaire</button>
            <button [disabled]="exerciceForm.invalid" type="button" (click)="saveExerciceAndExit()" class="btn btn-outline-primary pull-right ml-1"> <i class="fa fa-save" aria-hidden="true"></i>
        Enregistrer</button>
            <button [disabled]="exerciceForm.invalid" type="button" (click)="saveExercice()" class="btn btn-outline-primary pull-right"> <i class="fa fa-save" aria-hidden="true"></i>
        Enregistrer & Créer un autre</button>
        </p-toolbar>
    </p-fieldset>
</form>
<!-- /form exercice info -->
<ng-template #confirm *ngIf="'Exercice' | editable" let-modal>
    <div class="modal-header new-sous-class-header">
        <h4 class="modal-title" id="modal-title">Confirmer l'activation</h4>
        <button type="button" class="close" aria-label="Close button" aria-describedby="modal-title" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p><strong>Êtes vous sûr de vouloir activer l'exercice <span class="text-primary">{{exercice.libelle}} ?</span></strong></p>
        <p>Tous les autres exercice seront par conséquent inactif.
        <span class="text-danger">Effectuer l'opération ?</span>
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss('cancel click')">Annuler</button>
        <button type="button" ngbAutofocus class="btn btn-outline-danger" (click)="disableExerciceExcept()">
            Ok</button>
      </div>

</ng-template>